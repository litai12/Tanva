# ==================== 生产环境 - 后端配置 ====================
# 文件名: server/.env.production
# 用途: 生产环境部署时使用
# 说明: 与开发环境(server/.env)区分，使用生产数据库、强密钥和生产域名

# ==================== 服务器配置 ====================
PORT=4000
HOST=0.0.0.0
NODE_ENV=production

# ==================== 数据库配置 ====================
# ⚠️ 生产数据库凭据 - 需要在部署前根据实际情况替换
# 格式: postgresql://username:password@host:port/database?schema=public
# 示例: DATABASE_URL="postgresql://tanva_user:strong_password@prod-db.example.com:5432/tanva?schema=public"
DATABASE_URL="postgresql://tanva_user:your_strong_password@your-db-host:5432/tanva?schema=public"

# ==================== JWT 和 Cookie 配置 ====================
# ⚠️ 生产环境密钥 - 请使用生成的强随机值，不要使用这些示例值
# 生成方式: node -e "console.log(require('crypto').randomBytes(48).toString('hex'))"

# 生产 JWT Access Token 密钥 (48字节/96字符十六进制)
JWT_ACCESS_SECRET=8f7a09423277757d593c4408853e3055153e51724c722639d4d8751cc32fc3a3421e60ddcb72d8492d053c75c1c5fe16

# 生产 JWT Refresh Token 密钥 (48字节/96字符十六进制)
JWT_REFRESH_SECRET=1eb3a74a50f1598f9e278759a4b705c7d8c8f9bde65c3e9ff713b43275000f19cf60b5d37b6255e9231cac8b38f6cec1

# Token 生命周期
JWT_ACCESS_TTL=900s
JWT_REFRESH_TTL=30d

# Fastify Cookie 加密密钥 (48字节/96字符十六进制)
COOKIE_SECRET=17d49626ad6839e591dea0384088ed9d8ef1776f32ab6c69a2d13a705b13e643380553f040c3ade93f0bb3c1eddd0442

# ==================== Cookie 安全配置 ====================
# 生产环境必须启用 HTTPS
COOKIE_SECURE=true
COOKIE_SAMESITE=lax
# ⚠️ 生产域名 - 需要替换成实际的生产域名
COOKIE_DOMAIN=tai.tanva.tgtai.com

# ==================== CORS 配置 ====================
# ⚠️ 生产环境只允许特定来源 - 需要根据实际部署域名调整
CORS_ORIGIN=https://tai.tanva.tgtai.com

# ==================== 阿里云 OSS 配置 ====================
# 生产 OSS 区域
OSS_REGION=oss-cn-shenzhen

# 生产 OSS 存储桶
OSS_BUCKET=tai-tanva-ai

# ⚠️ 生产 OSS 凭据 - 需要替换成生产用的 AK/SK
# 如需隔离存储，请创建独立的生产桶和凭据
OSS_ACCESS_KEY_ID=your-prod-oss-access-key-id
OSS_ACCESS_KEY_SECRET=your-prod-oss-access-key-secret

# OSS Endpoint - 可根据部署情况选择公网或内网
OSS_ENDPOINT=oss-cn-shenzhen.aliyuncs.com

# CDN 加速域名
OSS_CDN_HOST=tai.tanva.tgtai.com

# ==================== AI 提供商配置 ====================
# 默认 AI 提供商
DEFAULT_AI_PROVIDER=gemini

# Google Gemini API - 生产共用密钥
GOOGLE_GEMINI_API_KEY=AIzaSyDUKP60M4YLpyyStCOvntwDtPX0zvl5F64

# Gemini 模型配置
GEMINI_MODEL=gemini-2.5-flash-image
GEMINI_TEXT_MODEL=gemini-2.0-flash

# 147 (Banana) API Key - 生产共用密钥
BANANA_API_KEY=sk-WBd9sGus7I68Wwl9ivwfIBP148GzuF7ypLISfdUqlW5Ipj5P

# ==================== 成本追踪配置 ====================
# 生产环境建议启用成本追踪
ENABLE_COST_TRACKING=true

# 生产数据库用于成本追踪 - 建议使用持久化数据库而不是 SQLite
# 可选使用专用的成本追踪数据库，或使用主数据库的单独 schema
COST_TRACKING_DATABASE_URL=postgresql://tanva_user:your_strong_password@your-db-host:5432/tanva_cost_tracking?schema=public

# ==================== 日志和监控配置 ====================
# 生产环境日志级别设为 info，减少日志噪音
LOG_LEVEL=info

# 生产环境保持 API 指标统计开启（供 Prometheus 等监控系统使用）
ENABLE_API_METRICS=true

# ==================== 部署注意事项 ====================
# 1. 生成新的 JWT 和 Cookie 密钥，不要使用示例值
# 2. 更新生产数据库凭据
# 3. 设置正确的生产域名（COOKIE_DOMAIN, CORS_ORIGIN, OSS_CDN_HOST）
# 4. 根据需要更新 OSS 凭据（如需隔离存储）
# 5. 确保数据库和 OSS 可正常连接
# 6. 在 CI/CD 中注入此文件，避免提交到版本库
# 7. 部署后立即测试登陆、API、OSS 上传等功能
