# 🛒 阿里云 ECS 购买完整步骤 (图文指南)

## 快速导航

```
你现在的位置:
阿里云控制台 → ECS → 实例列表

需要点击的位置:
左上角 "创建实例" 按钮 ← 就在这里!
```

---

## 第一步: 点击创建实例按钮

### 位置示意

```
┌─────────────────────────────────────────────────┐
│ 阿里云控制台                                    │
├─────────────────────────────────────────────────┤
│ 左侧菜单:                                       │
│ □ 概览  ← 你看截图在这里                       │
│ □ 实例  ← 现在应该点这个                        │
│   □ 创建实例  ← ★ 点这个按钮 ★               │
│   □ 镜像                                        │
│   □ 快照                                        │
│   □ 密钥对                                      │
│   □ 安全组                                      │
│ □ 存储                                         │
│ □ 网络                                         │
└─────────────────────────────────────────────────┘
```

### 具体操作

```
1. 在阿里云控制台左侧找 "实例" 菜单
   └─ 点击它

2. 在右侧会出现实例列表和按钮
   └─ 找到 "创建实例" 按钮 (通常是蓝色)
   └─ 点击它

3. 或者直接访问这个链接:
   https://ecs.console.aliyun.com/server/create
```

---

## 第二步: 填写购买配置

### 页面会分为多个部分,依次填写:

#### 1. 地域和可用区

```
地域: 华南1 (深圳) ← 选这个 (国内最优)
   └─ 可用区: A 或 B (随意,通常A就可以)

或者选择你离得最近的:
├─ 华东1 (杭州) - 如果你在浙江
├─ 华北2 (北京) - 如果你在华北
├─ 华东2 (上海) - 如果你在上海
└─ 华南1 (深圳) ✅ 推荐 (国际访问快)
```

#### 2. 实例类型

```
需要选择合适的配置:

共享型/突发型 (便宜 💚):
├─ t5: ¥40-50/月
│   └─ 适合: 轻量应用, 博客
└─ t6: ¥50-60/月
    └─ 适合: 中小应用 ← 推荐选这个

通用型 (均衡):
├─ c5: ¥100+/月
│   └─ 适合: 中等应用
└─ c6: ¥120+/月
    └─ 适合: 生产应用

计算型 (贵但快):
└─ i2: ¥200+/月
    └─ 适合: 高性能需求

★ 对于 Tanva: 选 t6 或 c5 都可以
```

#### 3. 规格

```
从右边列表选择规格:

共享型 t6 下的规格:
├─ 1核2GB (¥45/月) - 够用
└─ 2核4GB (¥90/月) ← 推荐选这个

通用型 c5 下的规格:
├─ 2核4GB (¥110/月)
├─ 2核8GB (¥130/月) ← 更稳定
└─ 4核8GB (¥260/月)

★ 建议选: t6 2核4GB (¥90/月)
  或      c5 2核4GB (¥110/月)
```

#### 4. 镜像 (操作系统)

```
公共镜像 标签页:

操作系统:
├─ Linux (推荐)
│   ├─ Ubuntu 22.04 64位 ← ★ 选这个 ★
│   ├─ CentOS Stream 9 64位
│   └─ Aliyun Linux 3 64位
└─ Windows (不推荐, 更贵)

选择后可以看到:
├─ 镜像名称: ubuntu_22_04_x64_20g_alibase_xxx
├─ 镜像ID: ubuntu_22_04_x64_20G_alibase_xxx
└─ 大小: 20 GB
```

#### 5. 存储

```
系统盘:
├─ 磁盘类型: 高效云盘 ✅
├─ 大小: 40GB ← 改成这个 (默认可能是20GB)
│   (用于 OS + Node.js + PostgreSQL)
└─ 加密: 不需要

数据盘:
└─ 暂时不需要添加
```

#### 6. 网络配置

```
VPC (虚拟私有云):
└─ 新建 VPC ← 或选择已有的

子网:
└─ 新建子网 ← 或选择已有的

公网 IP:
├─ ☑ 分配公网 IP ← ★ 必须勾选! ★
└─ 带宽类型:
    ├─ 按流量计费 ← ★ 选这个 (便宜)
    └─ 按带宽计费 (贵)

IPv6:
└─ 不需要

安全组:
└─ 新建安全组 ← 或选择已有的
   (稍后配置规则)
```

#### 7. 系统配置

```
密钥对:
├─ ☑ 使用密钥对登录 ← ★ 必须选这个 ★
├─ 选择密钥对:
│   └─ "新建密钥对" ← 如果没有的话
│   └─ 或选择已有的
└─ 密钥对名称: tanva-production
   (或随意命名)

根密码:
└─ 不需要设置 (使用密钥对登录更安全)

实例名称:
├─ tanva-production ← 便于识别
└─ 或随意命名

主机名:
└─ tanva-prod (可选)

RAM 角色:
└─ 不需要
```

#### 8. 购买配置

```
购买时长:
├─ 1个月 ← 先选这个试用
└─ 1年 (便宜20%)

自动续费:
└─ ☑ 启用自动续费 (推荐)

其他:
├─ 用户协议: ☑ 同意
└─ 开票信息: 可选
```

---

## 第三步: 确认订单

```
左侧会显示配置总结:
├─ 规格: 2核4GB
├─ 镜像: Ubuntu 22.04
├─ 系统盘: 40GB 高效云盘
├─ 带宽: 1Mbps 按流量计费
├─ 月租费用: ¥90 (或你选的金额)
└─ 右下角: "立即购买" 按钮 ← 点这个
```

---

## 第四步: 支付

```
跳出支付页面:

选择支付方式:
├─ 支付宝 ← ★ 推荐 ★
├─ 微信
├─ 银联
└─ 其他

点击 "支付" 按钮
└─ 进入支付页面
└─ 完成支付

等待 3-5 分钟
└─ 服务器启动完成!
```

---

## 第五步: 获取登录信息

### 返回 ECS 实例列表

```
https://ecs.console.aliyun.com/server/

你会看到新创建的实例:
├─ 实例名称: tanva-production
├─ 实例ID: i-xxxxx... ← 记下来
├─ 公网IP: 120.xxx.xxx.xxx ← ★ 重要! ★
├─ 状态: 运行中 (绿色)
└─ 操作: "更多" → "连接终端" (可以用浏览器连接)
```

### 获取密钥对

```
点击左侧菜单:
ECS → 密钥对

找到你刚创建的密钥对:
├─ 密钥对名称: tanva-production
├─ 如果没下载过,点 "下载私钥"
└─ 文件名: tanva-production.pem

保存到安全位置:
mv ~/Downloads/tanva-production.pem ~/.ssh/
chmod 600 ~/.ssh/tanva-production.pem
```

---

## 第六步: 连接到新服务器

```bash
# 获取公网 IP (从控制台)
# 例: 47.106.150.200

# 连接
ssh -i ~/.ssh/tanva-production.pem ubuntu@47.106.150.200

# 你会看到提示:
# The authenticity of host ... can't be established.
# Are you sure you want to continue connecting (yes/no)?

# 输入: yes

# 然后看到:
# ubuntu@iZxxxxx:~$

# ✅ 成功连接!
```

---

## 完整的购买配置清单

```
✅ 快速检查表

基础配置:
☐ 地域: 华南1 (深圳)
☐ 实例类型: t6 通用计算
☐ 规格: 2核4GB (或更高)
☐ 镜像: Ubuntu 22.04 64位

存储配置:
☐ 系统盘: 高效云盘 40GB

网络配置:
☐ 公网 IP: ☑ 已分配
☐ 带宽类型: 按流量计费
☐ 安全组: 新建 (稍后配置规则)

系统配置:
☐ 密钥对: ☑ 使用密钥对
☐ 新建密钥对: tanva-production
☐ 实例名称: tanva-production

购买配置:
☐ 购买时长: 1个月 (或1年)
☐ 自动续费: ☑ 启用
☐ 用户协议: ☑ 同意

确认购买:
☐ 点击 "立即购买"
☐ 支付费用 (支付宝)
☐ 等待 3-5 分钟

获取信息:
☐ 记下公网 IP
☐ 下载密钥对文件
☐ 保存到 ~/.ssh/
```

---

## 成本确认

```
选择配置后,左侧会显示价格:

t6 2核4GB:
├─ 月租: ¥90
├─ 按年: ¥900/年 (平均 ¥75/月)
└─ 总费用: ¥90 (1个月)

c5 2核4GB:
├─ 月租: ¥110
├─ 按年: ¥1100/年 (平均 ¥92/月)
└─ 总费用: ¥110 (1个月)

推荐: 选 t6 2核4GB (¥90/月)
      足够跑 Tanva 应用
```

---

## 常见问题

### Q: 为什么要选"按流量计费"而不是"按带宽"?

```
按流量计费:
├─ 1GB = ¥0.8
├─ 月均 100GB = ¥80/月
├─ 低流量月份便宜
└─ ✅ 推荐用于初期

按带宽计费:
├─ 1Mbps = ¥23/月
├─ 固定费用
└─ 高流量时便宜

初期建议: 按流量计费
```

### Q: 为什么必须分配公网IP?

```
没有公网IP:
└─ 无法从外网访问你的应用
└─ 只能内网使用

有公网IP:
├─ 可以访问 https://tai.tanva.tgtai.com
├─ 可以远程登录 SSH
└─ ✅ 必须选
```

### Q: 为什么要选密钥对登录?

```
密码登录:
├─ 容易被暴力破解
└─ 不安全

密钥对登录:
├─ 用私钥文件认证
├─ 无法暴力破解
└─ ✅ 更安全
```

### Q: Ubuntu/CentOS 选哪个?

```
Ubuntu:
├─ 文档多
├─ 新手友好
└─ ✅ 推荐

CentOS:
├─ 稳定性强
└─ 企业常用

对于初期: Ubuntu 更好入门
```

---

## 下一步

购买完成后:

1. ✅ 等待 3-5 分钟服务器启动
2. ✅ 记下公网 IP
3. ✅ 下载并保存密钥对文件
4. ✅ SSH 连接到服务器
5. ✅ 按照 `ALIYUN_ECS_COMPLETE_GUIDE.md` 部署

---

## 如果卡住了

```
常见问题:

"找不到创建实例按钮"
→ 左侧菜单 → 实例 → 创建实例

"不知道选哪个规格"
→ t6 2核4GB (¥90/月) 就够用

"购买完没看到实例"
→ 刷新页面,或等待 1 分钟

"无法连接到服务器"
→ 检查安全组是否开放 22 端口
→ 检查密钥文件权限: chmod 600 xxx.pem

"密钥对文件丢失"
→ 无法登录服务器
→ 只能重新创建实例
→ ⚠️ 要备份好!
```

---

## 截图参考

```
你现在看的页面是: 实例列表
需要点击的位置是: 左上角 "创建实例" 或
                 左侧菜单 "实例" → "创建实例"

购买成功后会回到实例列表,
看到你的新实例在列表里,状态为 "运行中"
```

祝购买顺利! 🎉

有任何购买过程中的问题,随时问!
