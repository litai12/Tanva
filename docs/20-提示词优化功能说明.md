# 提示词优化功能说明

本篇说明提示词优化服务、界面与用法，便于结合 AI 工作流提高提示质量。

## 概览

- 服务文件：`src/services/promptOptimizationService.ts`
- UI 演示：`src/pages/PromptOptimizerDemo.tsx`（访问：`/app?prompt-demo`）
- Hook：`src/hooks/usePromptOptimization.ts`
- 默认模型：`gemini-2.0-flash`

## 服务特性

- 超时与重试：`withTimeout`（90s）+ `withRetry`（5 次指数退避）
- 规范化输出：强制单段文本、去除多余换行/空白
- 可配置项：`language`（中文/English）、`focus`、`tone`、`lengthPreference`

### 请求/响应

输入：
```ts
type PromptOptimizationRequest = {
  input: string;
  language?: '中文' | 'English';
  focus?: string;
  tone?: string;
  lengthPreference?: 'concise' | 'balanced' | 'detailed';
};
```

输出：
```ts
type PromptOptimizationResult = {
  optimizedPrompt: string;
  model: string;
  tokenUsage?: number;
};
```

## 使用方法

1) 打开 `/app?prompt-demo` 进入测试台
2) 填写“原始描述”，可选设置语言/语气/重点/长度
3) 点击“生成优化提示”，复制结果到 AI 生成/编辑/融合场景中使用

## 环境变量

- `VITE_GOOGLE_GEMINI_API_KEY`：未配置将提示警告并不可用

## 最佳实践

- 输出语言与目标一致：中文内容优先中文输出
- 需求不充分时补足背景但不偏题
- 针对融合/编辑任务，在优化后的提示中保留明确操作指令

